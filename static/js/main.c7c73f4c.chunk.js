(this["webpackJsonpfriday-lesson1"]=this["webpackJsonpfriday-lesson1"]||[]).push([[0],{13:function(e,t,a){e.exports={App:"App_App__3Uewk",container:"App_container__lEsUy",formWrapper:"App_formWrapper__2fr31"}},16:function(e,t,a){e.exports={header:"Header_header__MvSEZ",navList:"Header_navList__SRaEo",navLink:"Header_navLink__2CSW2",linkItem:"Header_linkItem__1zaZK"}},21:function(e,t,a){e.exports={error:"SignUp_error__1MTeK",linkToLogin:"SignUp_linkToLogin__3V_xG",registrationError:"SignUp_registrationError__3WYgz"}},28:function(e,t,a){e.exports={btn:"Button_btn__1nhA4",error:"Button_error__3zTj0"}},29:function(e,t,a){e.exports={input:"InputCheckbox_input__2BraD",checkbox:"InputCheckbox_checkbox__3Fr75",active:"InputCheckbox_active__2rIEX"}},31:function(e,t,a){e.exports={inputText:"InputText_inputText__1ZhLQ",error:"InputText_error__f2mwi"}},50:function(e,t,a){e.exports={errorLogin:"Login_errorLogin__2xNUa",loginFormWrapper:"Login_loginFormWrapper__1uesW"}},51:function(e,t,a){e.exports={wrapper:"Preloader_wrapper__1ACTc"}},52:function(e,t,a){e.exports=a.p+"static/media/loader.e46d3467.gif"},55:function(e,t,a){e.exports=a(84)},60:function(e,t,a){},84:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(24),c=a.n(o),i=(a(60),a(3)),l=a(31),s=a.n(l),u=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("input",{className:"".concat(s.a.inputText," ").concat(e.error&&""!==e.value?s.a.error:""),type:e.type,value:e.value,onChange:e.onChange,onKeyPress:function(t){"Enter"===t.key&&e.actionEnter&&e.actionEnter()},name:e.name,placeholder:e.placeholder}))},m=a(28),d=a.n(m),p=function(e){return r.a.createElement("button",{className:"red"===e.mode?"".concat(d.a.btn,"  ").concat(d.a.error):d.a.btn,onClick:e.action,type:e.type,disabled:e.disabled},e.value)},E=a(1),f=function(){return Object(E.c)((function(e){return e.login.isLoggedIn}))?r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,"Profile Page"),r.a.createElement(u,{value:"",onChange:function(){},actionEnter:function(){alert("enter")},type:"text"}),r.a.createElement(p,{value:"click",action:function(){alert("click")}})):r.a.createElement(i.a,{to:"/login"})},h=a(6),g=a(17),v=a(5),b=a(49),_=a.n(b).a.create(Object(v.a)({baseURL:"https://neko-back.herokuapp.com/2.0"},{withCredentials:!0})),w=function(e){return _.post("/auth/forgot",{email:e,from:"test-front-admin <ai73a@yandex.by>",message:"<div style= 'background-color: #b8b8b8; padding: 15px'> password recovery link: <a href='http://localhost:3000/Fridayapp#/initiate/$token$'> Click the link to restore access to your account </a></div>"})},S=function(e,t){return _.post("/auth/set-new-password",{password:e,resetPasswordToken:t})},y=function(e){return _.post("/auth/login",e)},O=function(){return _.delete("/auth/me")},T=function(e){return _.post("/auth/register",e)},R=function(){return _.post("auth/me")},j={isLoggedIn:!1,error:"",status:"idle"},I=function(e){return{type:"SET_IS_LOGGED",value:e}},k=function(e){return{type:"SET_LOGIN_ERROR",error:e}},N=function(e){return{type:"SET_STATUS",status:e}},x=a(50),L=a.n(x),A=a(51),C=a.n(A),P=a(52),F=a.n(P),G=function(){return r.a.createElement("div",{className:C.a.wrapper},r.a.createElement("img",{src:F.a,alt:"loading..."}))},W=a(29),Z=a.n(W),U=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("label",{className:"".concat(Z.a.checkbox," ").concat(e.checked?Z.a.active:"")},r.a.createElement("input",{className:Z.a.input,type:"checkbox",checked:e.checked,onChange:e.changeStatus,name:"rememberMe"}),r.a.createElement("span",null,e.value)))},M=a(13),V=a.n(M),D=function(){var e=Object(E.b)(),t=Object(E.c)((function(e){return e.login.isLoggedIn})),a=Object(E.c)((function(e){return e.login.error})),n=Object(E.c)((function(e){return e.login.status})),o=Object(g.a)({initialValues:{email:"",password:"",rememberMe:!1},validate:function(e){var t={};return e.email?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(e.email)||(t.email="Invalid email address"):t.email="Required",e.password?e.password.length<6&&(t.password="Must be 6 characters or less"):t.password="Required",t},onSubmit:function(t){var a;e((a=t,function(e){e(N("loading")),y(a).then((function(t){200===t.status&&e(I(!0))})).catch((function(t){var a=t.response.data.error;e(k(a)),setTimeout((function(){return e(k(""))}),5e3)})).finally((function(){e(N("succeeded"))}))}))}});return t?r.a.createElement(i.a,{to:"/"}):r.a.createElement("div",{className:V.a.formWrapper},r.a.createElement("h1",null,"Login Page"),r.a.createElement("form",{onSubmit:o.handleSubmit},r.a.createElement(u,{name:"email",value:o.values.email,onChange:o.handleChange,placeholder:"Email",actionEnter:function(){},type:"text"}),o.errors.email?r.a.createElement("div",{style:{color:"red"}},o.errors.email):null,r.a.createElement(u,{name:"password",value:o.values.password,onChange:o.handleChange,placeholder:"Password",actionEnter:function(){},type:"password"}),o.errors.password?r.a.createElement("div",{style:{color:"red"}},o.errors.password):null,a&&r.a.createElement("div",{className:L.a.errorLogin},a),"loading"===n&&r.a.createElement(G,null),r.a.createElement(U,{checked:o.values.rememberMe,changeStatus:o.handleChange,value:"remember me",name:"rememberMe"}),r.a.createElement("br",null),r.a.createElement(p,{value:"send",action:o.handleSubmit,type:"submit"})),r.a.createElement(h.b,{className:"",to:"recovery",activeClassName:""},r.a.createElement("span",{className:""}," Forgot password?")))},z=a(21),H=a.n(z),Y={isRegistered:!1,registrationLoad:!1,registrationError:null},q=function(e){return{type:"SET-LOADING-REGISTER",loading:e}},$=function(e){return{type:"SET-REGISTRATION-ERROR",error:e}},B=function(){var e=Object(E.c)((function(e){return e.signup.isRegistered})),t=Object(E.c)((function(e){return e.signup.registrationLoad})),a=Object(E.c)((function(e){return e.signup.registrationError})),n=Object(E.b)(),o=Object(g.a)({initialValues:{email:"",password:""},onSubmit:function(e){var t;n((t=e,function(e){e(q(!0)),T(t).then((function(t){e({type:"SET-IS-REGISTERED",isRegistered:!0})})).catch((function(t){e($(t.response.data.error)),setTimeout((function(){return e($(""))}),5e3)})).finally((function(){e(q(!1))}))}))},validate:function(e){var t={};return e.email?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(e.email)||(t.email="Invalid email address"):t.email="Required",e.password?e.password.length<7&&(t.password="Password must be at least 7 characters"):t.password="Required",t}});return e?r.a.createElement(i.a,{to:"/login"}):t?r.a.createElement(G,null):r.a.createElement("div",{className:V.a.formWrapper},r.a.createElement("h2",null,"Registration"),r.a.createElement("form",null,r.a.createElement(u,Object.assign({placeholder:"email",type:"text"},o.getFieldProps("email"))),o.errors.email&&r.a.createElement("div",{className:H.a.error},o.errors.email),r.a.createElement(u,Object.assign({placeholder:"password",type:"password"},o.getFieldProps("password"))),o.errors.password&&r.a.createElement("div",{className:H.a.error},o.errors.password),r.a.createElement(p,{disabled:!1,type:"submit",value:"register",action:o.handleSubmit})),r.a.createElement("div",{className:H.a.linkToLogin},r.a.createElement(h.b,{to:"login"},r.a.createElement("span",null,"Login"))),a&&r.a.createElement("div",{className:H.a.registrationError},a))},K=a(22),J=a.n(K),Q=a(36),X={error:"",isShipment:!1,isShowPreloader:!1},ee=function(e){return{type:"RECOVERY_SET_SHIPMENT",shipment:e}},te=function(e){return{type:"RECOVERY_SHOW_ERROR",error:e}},ae=function(e){return{type:"RECOVERY_SET_STATUS",status:e}},ne=a(54),re=function(e){var t=Object(n.useState)(!1),a=Object(ne.a)(t,2),r=a[0],o=a[1];return Object(n.useEffect)((function(){var t=setTimeout((function(){e&&o(!0)}),5e3);return function(){return clearTimeout(t)}}),[e]),r},oe=function(){var e=Object(E.c)((function(e){return e.recovery.error})),t=Object(E.c)((function(e){return e.recovery.isShowPreloader})),a=Object(E.c)((function(e){return e.recovery.isShipment})),n=re(a),o=Object(E.b)(),c=Object(g.a)({initialValues:{email:""},onSubmit:function(e){var t;o((t=e.email,function(){var e=Object(Q.a)(J.a.mark((function e(a){return J.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a(ae(!0)),e.prev=1,e.next=4,w(t);case 4:a(ee(!0)),a(ae(!1)),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),a(te(e.t0.response.data.error)),a(ae(!1));case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}())),c.resetForm()},validate:function(e){var t={};return e.email?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(e.email)||(t.email="Invalid email address"):t.email="Required",t}});return n?r.a.createElement(i.a,{to:"/login"}):a?r.a.createElement("div",null,"Instructions for password recovery have been sent to your email address."):r.a.createElement("div",{className:V.a.formWrapper},t?r.a.createElement(G,null):"",r.a.createElement("h2",null,"Forgot password?"),r.a.createElement("p",null,"Please enter your email address."),r.a.createElement("form",{onSubmit:c.handleSubmit},r.a.createElement(u,{name:"email",value:c.values.email,onChange:c.handleChange,actionEnter:function(){},type:"text"}),c.errors.email?r.a.createElement("div",{style:{color:"red"}},c.errors.email):null,r.a.createElement("p",{style:{color:"red"}},e),r.a.createElement(p,{value:"send",action:c.handleSubmit,type:"submit",disabled:t,mode:t?"red":null})))},ce=function(){var e=Object(E.c)((function(e){return e.recovery.isShowPreloader})),t=Object(E.c)((function(e){return e.recovery.isShipment})),a=re(t),n=Object(E.c)((function(e){return e.recovery.error})),o=Object(E.b)(),c=Object(i.g)().token,l=Object(g.a)({initialValues:{password:"",passwordRepeat:""},onSubmit:function(e){o(function(e,t){return function(){var a=Object(Q.a)(J.a.mark((function a(n){return J.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n(ae(!0)),a.prev=1,a.next=4,S(e,t);case 4:n(ee(!0)),n(ae(!1)),a.next=12;break;case 8:a.prev=8,a.t0=a.catch(1),n(te(a.t0.response.data.error)),setTimeout((function(){return n(te(""))}),5e3);case 12:case"end":return a.stop()}}),a,null,[[1,8]])})));return function(e){return a.apply(this,arguments)}}()}(e.passwordRepeat,c)),l.resetForm()},validate:function(e){var t={};return e.password?e.password.length<2?t.password="Too Short!":e.password.length>10?t.password="Max 10 chars":e.password!==e.passwordRepeat&&(t.password="The entered values do not match."):t.password="Required",t}});return a?r.a.createElement(i.a,{to:"/login"}):t?r.a.createElement("div",null,"You have successfully restored your password."):r.a.createElement("div",{className:V.a.formWrapper},e?r.a.createElement(G,null):"",r.a.createElement("h1",null,"Password recovery page"),r.a.createElement("p",null,"Please enter your new password."),r.a.createElement("form",{onSubmit:l.handleSubmit},r.a.createElement(u,{name:"password",value:l.values.password,onChange:l.handleChange,actionEnter:function(){},type:"text"}),r.a.createElement(u,{name:"passwordRepeat",value:l.values.passwordRepeat,onChange:l.handleChange,actionEnter:function(){},type:"password"}),l.errors.password?r.a.createElement("div",{style:{color:"red"}},l.errors.password):null,r.a.createElement(p,{value:"send",action:l.handleSubmit,type:"submit",disabled:e,mode:e?"red":null})),r.a.createElement("span",null,n))},ie=a(16),le=a.n(ie),se=function(){var e=Object(E.b)(),t=Object(E.c)((function(e){return e.login.isLoggedIn})),a=Object(E.c)((function(e){return e.login.status}));return r.a.createElement(r.a.Fragment,null,"loading"===a&&r.a.createElement(G,null),r.a.createElement("header",{className:le.a.header},r.a.createElement("nav",null,r.a.createElement("ul",{className:le.a.navList},r.a.createElement(h.b,{className:le.a.navLink,to:"/",activeClassName:""},r.a.createElement("li",{className:le.a.linkItem}," Profile")),t?null:r.a.createElement(h.b,{className:le.a.navLink,to:"login",activeClassName:""},r.a.createElement("li",{className:le.a.linkItem}," Login")),r.a.createElement(h.b,{className:le.a.navLink,to:"signup",activeClassName:""},r.a.createElement("li",{className:le.a.linkItem}," Signup")),t?r.a.createElement(p,{value:"Log out",action:function(){e((function(e){e(N("loading")),O().then((function(t){200===t.status&&e(I(!1))})).finally((function(){e(N("succeeded"))}))}))}}):null))))},ue={isInitialized:!1,status:"idle",error:null},me=function(e){return{type:"SET_STATUS_APP",status:e}};var de=function(){var e=Object(E.b)(),t=Object(E.c)((function(e){return e.app.isInitialized}));return Object(n.useEffect)((function(){e((function(e){e(me("loading")),R().then((function(t){e(me("succeeded")),e(I(!0))})).catch((function(e){alert(e)})).finally((function(){e({type:"APP_SET_INITIALIZED",isInitialized:!0})}))}))}),[]),t?r.a.createElement("div",{className:V.a.App},r.a.createElement(se,null),r.a.createElement(i.d,null,r.a.createElement(i.b,{exact:!0,path:["/Fridayapp","/"],render:function(){return r.a.createElement(f,null)}}),r.a.createElement(i.b,{path:"/login",render:function(){return r.a.createElement(D,null)}}),r.a.createElement(i.b,{path:"/signup",render:function(){return r.a.createElement(B,null)}}),r.a.createElement(i.b,{path:"/recovery",render:function(){return r.a.createElement(oe,null)}}),r.a.createElement(i.b,{path:"/initiate/:token",render:function(){return r.a.createElement(ce,null)}}),r.a.createElement(i.b,{path:"/404",render:function(){return r.a.createElement("h1",null,"Error 404. Page not found.")}}),r.a.createElement(i.a,{from:"*",to:"/404"}))):r.a.createElement(G,null)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var pe=a(20),Ee=a(53),fe=Object(pe.c)({app:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ue,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"APP_SET_INITIALIZED":return Object(v.a)({},e,{isInitialized:t.isInitialized});case"SET_STATUS_APP":return Object(v.a)({},e,{status:t.status});default:return e}},login:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_IS_LOGGED":return Object(v.a)({},e,{isLoggedIn:t.value});case"SET_LOGIN_ERROR":return Object(v.a)({},e,{error:t.error});case"SET_STATUS":return Object(v.a)({},e,{status:t.status});default:return e}},signup:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET-IS-REGISTERED":return Object(v.a)({},e,{isRegistered:t.isRegistered});case"SET-LOADING-REGISTER":return Object(v.a)({},e,{registrationLoad:t.loading});case"SET-REGISTRATION-ERROR":return Object(v.a)({},e,{registrationError:t.error});default:return e}},recovery:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:X,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"RECOVERY_SET_SHIPMENT":return Object(v.a)({},e,{isShipment:t.shipment});case"RECOVERY_SHOW_ERROR":return Object(v.a)({},e,{error:t.error});case"RECOVERY_SET_STATUS":return Object(v.a)({},e,{isShowPreloader:t.status});default:return Object(v.a)({},e)}}}),he=Object(pe.d)(fe,Object(pe.a)(Ee.a));window.store=he,c.a.render(r.a.createElement(h.a,null,r.a.createElement(r.a.StrictMode,null,r.a.createElement(E.a,{store:he},r.a.createElement(de,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[55,1,2]]]);
//# sourceMappingURL=main.c7c73f4c.chunk.js.map